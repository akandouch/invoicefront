<div class="main row">
  <div class="col-lg-12">
      <div class="col-lg-12 row">
        <div class="col-lg-12">
          <h5>
            <fa-icon [icon]="faPlus" class="btn btn-secondary" (click)="openModal(invoiceContent)"></fa-icon>&nbsp;
            Invoices
          </h5>
        </div>
        <div class="col-lg-12">
          <div class="container-table-items col-lg-12">
            <div class="row new-items table-header">
              <div class="col-lg-1">#</div>
              <div class="col-lg-3">Period</div>
              <div class="col-lg-3">Customer</div>
              <div class="col-lg-3">vat</div>
              <div class="col-lg-2"></div>
            </div>
            <div *ngFor="let i of history; let idx = index" class="row add-items table-items">
              <div class="col-lg-1">{{idx}}</div>
              <!--<div class="col-lg-3">{{i.date}}</div>-->
              <div class="col-lg-3">{{i.invoiced.firstname}}</div>
              <div class="col-lg-3">{{i.invoiced.vat}}</div>
              <div class="col-lg-2">
                <fa-icon [icon]="faFolderOpen" class="btn btn-warning" (click)="openInvoice(i)"></fa-icon>&nbsp;
                <fa-icon [icon]="faEye" class="btn btn-warning" (click)="openModal(content, i)"></fa-icon>&nbsp;
                <fa-icon [icon]="faFileDownload" class="btn btn-warning" (click)="generatePdf(i)"></fa-icon>&nbsp;
                <fa-icon [icon]="faTrashAlt" class="btn btn-warning" (click)="deleteInvoice(i)"></fa-icon>
              </div>
            </div>
          </div>    
        </div>
        &nbsp;
        <div class="col-lg-12">
          <app-item-list [invoice]="current" *ngIf="current"></app-item-list>
        </div>
      </div>
    </div>
</div>



<ng-template #content let-c="close" let-d="dismiss" class="col-lg-12">
    <div class="modal-header col-lg-12">
        <h4 class="modal-title" id="modal-basic-title">Invoice preview</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
  <app-invoice-preview [invoice]="preview"></app-invoice-preview>
</ng-template>

<ng-template #invoiceContent let-c="close" let-d="dismiss" class="col-lg-12">
    <div class="modal-header col-lg-12">
        <h4 class="modal-title" id="modal-basic-title">New Invoice</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
    
    <div class="col-lg-12 row">

      <div class="col-lg-6 current-profile">
        <h5>My current profile</h5>
        <div>
        <p>{{currentProfile.firstname}}, {{currentProfile.lastname}}</p>
        <p>{{currentProfile.vat}}</p>
        <p>{{currentProfile.address.street}}, {{currentProfile.address.streetNumber}}</p>
        <p>{{currentProfile.address.city}} {{currentProfile.address.postcode}}, {{currentProfile.address.country}}</p>
        </div>
      </div>

      <div class="col-lg-6 customer-profile" *ngIf="currentCustomer">
          <h5>Customer to invoice</h5>
          <div>
            <p>{{currentCustomer.firstname}}, {{currentCustomer.lastname}}</p>
            <p>{{currentCustomer.vat}}</p>
            <p>{{currentCustomer.address.street}}, {{currentCustomer.address.streetNumber}}</p>
            <p>{{currentCustomer.address.city}} {{currentCustomer.address.postcode}}, {{currentCustomer.address.country}}</p>
          </div>
      </div>

      <div class="col-lg-12">
        <table class="col-lg-12">
        <tbody>
        <tr><td colspan="3"><input type="text" (keyup)="searchProfiles($event)" class="col-lg-11"><fa-icon [icon]="faSearch"></fa-icon></td></tr>
        <tr *ngFor="let i of profilesFound" class="new-invoice-profiles" (click)="selectCustomer(i)">
          <td>{{i.firstname}}</td>
          <td>{{i.lastname}}</td>
          <td>{{i.vat}}</td>
        </tr>
        </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer col-lg-12">
      <button  (click)="save()" type="button" class="btn btn-outline-secondary  new-invoice">Create invoice</button>
    </div>
</ng-template>
